<app-header-admin></app-header-admin>
<div style="display: flex; justify-content: space-between;" class="m-2">
    <h2>Gestión de anuncios</h2>
    <button pButton type="button" label="Añadir anuncio" icon="pi pi-plus"  [routerLink]="['/admin/crearAnuncio']" [ngStyle]="{ 'margin-left': 'auto' }"></button>
  </div>
<div class="card">
    <p-toast></p-toast>
    <p-table [value]="anuncios" dataKey="idAnuncio"  editMode="row" styleClass="p-datatable-striped"  [tableStyle]="{'min-width': '50rem'}" [paginator]="true" [rows]="15"> 
        <ng-template pTemplate="header">
            <tr>
                <th style="width:20%">Servicio</th>
                <th style="width:20%">Fecha</th>
                <th style="width:20%">Hora Inicio</th>
                <th style="width:20%">Hora Fin</th>
                <th style="width:20%">Descripción</th>
                <th style="width:20%">Precio</th>
                <th style="width:20%"></th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-anuncio let-editing="editing" let-ri="rowIndex">
            <tr [pEditableRow]="anuncio">
                <td>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="text" [(ngModel)]="anuncio.tipo" />
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{anuncio.tipo}}
                        </ng-template>
                    </p-cellEditor>
                </td>
                <td>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="date" [(ngModel)]="anuncio.fecha" required />
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{anuncio.fecha | date: 'dd/MM/yyyy'}}
                        </ng-template>
                    </p-cellEditor>
                </td>
                <td>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="time" [(ngModel)]="anuncio.hora_inicio" />
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{anuncio.hora_inicio}}
                        </ng-template>
                    </p-cellEditor>
                </td>
                <td>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="time" [(ngModel)]="anuncio.hora_fin" />
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{anuncio.hora_fin}}
                        </ng-template>
                    </p-cellEditor>
                </td>
                
                <td>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="text" [(ngModel)]="anuncio.descripcion" />
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{anuncio.descripcion}}
                        </ng-template>
                    </p-cellEditor>
                </td>
                <td>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="number" [(ngModel)]="anuncio.precio" />
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{anuncio.precio | currency: 'EUR'}}
                        </ng-template>
                    </p-cellEditor>
                </td>
              
                
                
                <td>
                    <div class="flex align-items-center justify-content-center gap-2">
                        <button *ngIf="!editing" pButton pRipple type="button" pInitEditableRow icon="pi pi-pencil" (click)="onRowEditInit(anuncio)" class="p-button-rounded p-button-text"></button>
                        <button *ngIf="editing" pButton pRipple type="button" pSaveEditableRow icon="pi pi-check" (click)="onRowEditSave(anuncio)" class="p-button-rounded p-button-text p-button-success mr-2"></button>
                        <button *ngIf="editing" pButton pRipple type="button" pCancelEditableRow icon="pi pi-times" (click)="onRowEditCancel(anuncio, ri)" class="p-button-rounded p-button-text p-button-danger"></button>
                        <button pButton pRipple type="button" icon="pi pi-trash" (click)="deleteAnuncio(anuncio.idAnuncio)" class="p-button-rounded p-button-text p-button-danger"></button>

                    </div>
                </td>
            </tr>
        </ng-template>
    </p-table>
    <p-toast></p-toast>
    <p-confirmDialog></p-confirmDialog>
</div>

<router-outlet></router-outlet>
